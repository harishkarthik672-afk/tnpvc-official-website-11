<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TNPVC Google Ads | Campaign Creator</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --tnpvc-purple: #4b2491;
            --tnpvc-light-purple: #f4f0ff;
            --google-blue: #1a73e8;
            --google-gray: #5f6368;
            --google-light-gray: #dadce0;
            --google-bg: #f8f9fa;
            --google-green: #1e8e3e;
            --accent-color: var(--tnpvc-purple);
            --purple-gradient: linear-gradient(135deg, #311b92 0%, #4b2491 50%, #9c27b0 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--google-bg);
            color: #202124;
            overflow-x: hidden;
            padding-top: 0;
            padding-bottom: 0;
        }

        header.ads-header {
            background: #fff;
            padding: 0 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--google-light-gray);
            position: sticky;
            top: 0;
            z-index: 1100;
            height: 60px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 0;
        }

        .ads-header .logo-container img {
            height: 48px !important;
            width: auto !important;
            object-fit: contain;
        }

        @media (max-width: 768px) {
            .ads-header .logo-container img {
                height: 40px !important;
            }
        }

        .header-title-group {
            display: flex;
            flex-direction: column;
            line-height: 1.2;
            min-width: 0;
        }

        .header-title-group .main-title {
            font-family: 'Plus Jakarta Sans', sans-serif;
            font-weight: 800;
            color: #202124;
            font-size: 0.95rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .header-title-group .sub-title {
            font-size: 0.65rem;
            color: var(--google-gray);
            font-weight: 500;
            white-space: nowrap;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }

        @media (max-width: 480px) {
            .ads-id-text {
                display: none;
            }

            header.ads-header {
                padding: 0 0.75rem;
                height: 56px;
            }

            .header-left img {
                height: 38px;
            }
        }

        .main-container {
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - 56px);
        }

        @media (min-width: 768px) {
            .main-container {
                flex-direction: row;
            }
        }

        /* ── Stepper ── */
        .stepper-sidebar {
            width: 100%;
            background: #fff;
            border-bottom: 1px solid var(--google-light-gray);
            padding: 0;
            display: flex;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            position: sticky;
            top: 60px;
            z-index: 1000;
        }

        .stepper-sidebar::-webkit-scrollbar {
            display: none;
        }

        @media (min-width: 768px) {
            .stepper-sidebar {
                width: 260px;
                border-bottom: none;
                border-right: 1px solid var(--google-light-gray);
                padding: 2rem 0;
                display: block;
                flex-shrink: 0;
            }
        }

        .step-item {
            padding: 0.6rem 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--google-gray);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: not-allowed;
            transition: 0.2s;
            border-left: 4px solid transparent;
            white-space: nowrap;
            opacity: 0.5;
        }

        @media (max-width: 768px) {
            .stepper-sidebar {
                top: 56px;
            }

            .step-item {
                border-left: none;
                border-bottom: 3px solid transparent;
                padding: 0.8rem 1.2rem;
                flex: 1;
                justify-content: center;
                text-align: center;
            }

            .step-item.active {
                border-left: none;
                border-bottom: 3px solid transparent;
                border-image: var(--purple-gradient);
                border-image-slice: 1;
            }
        }

        .step-item.active {
            color: var(--google-blue);
            border-left-color: var(--google-blue);
            background: #f4f8ff;
        }

        .step-item.completed {
            color: var(--google-green);
        }

        .step-number {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            flex-shrink: 0;
            transition: 0.3s;
        }

        .step-item.unlocked {
            cursor: pointer;
            opacity: 1;
        }

        .step-item.active .step-number {
            background: var(--accent-color);
            color: #fff;
        }

        .step-item.hidden {
            display: none;
        }

        .step-item.unlocked {
            opacity: 1;
            cursor: pointer;
        }

        .step-item.completed .step-number {
            background: var(--google-green);
            color: #fff;
        }

        /* ── Content Area ── */
        .content-area-wrap {
            flex: 1;
            padding: 1.5rem;
            padding-bottom: 140px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 1024px) {
            .content-area-wrap {
                padding: 3rem;
                padding-bottom: 100px;
                flex-direction: row;
                gap: 4rem;
                justify-content: space-between;
            }
        }

        .form-section {
            flex: 1;
            max-width: 600px;
        }

        .step-content {
            display: none;
            animation: slideUp 0.3s ease-out;
        }

        .step-content.active {
            display: block;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h2 {
            font-size: 1.7rem;
            font-weight: 400;
            margin-bottom: 2rem;
            color: #202124;
        }

        .card {
            background: #fff;
            border: 1px solid var(--google-light-gray);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #3c4043;
        }

        input,
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--google-light-gray);
            border-radius: 4px;
            outline: none;
            transition: 0.2s;
            font-family: inherit;
            font-size: 0.95rem;
        }

        input:focus,
        textarea:focus {
            border-color: var(--google-blue);
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.1);
        }

        .char-count {
            font-size: 0.7rem;
            color: var(--google-gray);
            text-align: right;
            margin-top: 4px;
        }

        /* ── Goals ── */
        .goal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .goal-card {
            border: 1px solid var(--google-light-gray);
            padding: 1.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: 0.2s;
        }

        .goal-card:hover {
            border-color: var(--google-blue);
            background: #f8faff;
            transform: translateY(-2px);
        }

        .goal-card.active {
            border-color: var(--google-blue);
            background: #e8f0fe;
            color: var(--google-blue);
            box-shadow: 0 4px 12px rgba(26, 115, 232, 0.15);
        }

        .goal-card i {
            display: block;
            margin: 0 auto 10px;
            width: 28px;
            height: 28px;
        }

        /* ── Preview (RIGHT SIDE) ── */
        .preview-column {
            width: 100%;
            max-width: 440px;
            flex-shrink: 0;
        }

        .preview-sticky {
            position: sticky;
            top: 20px;
        }

        @media (max-width: 1023px) {
            .preview-column {
                order: -1;
                max-width: 100%;
                margin-bottom: 1.5rem;
            }

            .preview-sticky {
                position: relative;
                top: 0;
            }
        }

        .google-ad-preview {
            background: #fff;
            border: 1px solid var(--google-light-gray);
            border-radius: 8px;
            padding: 1.8rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
        }

        .preview-headline {
            color: #1a0dab;
            font-size: 1.3rem;
            line-height: 1.3;
            margin-bottom: 6px;
            cursor: pointer;
            overflow-wrap: break-word;
            word-wrap: break-word;
            word-break: break-all;
            /* Fixed long overflow */
        }

        .preview-headline:hover {
            text-decoration: underline;
        }

        .preview-desc {
            color: #4d5156;
            font-size: 0.92rem;
            line-height: 1.5;
            overflow-wrap: break-word;
            word-wrap: break-word;
            word-break: break-all;
        }

        .preview-tag {
            display: flex;
            gap: 6px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            align-items: center;
        }

        /* ── Action Bar ── */
        .ads-action-bar {
            background: #fff;
            padding: 1.5rem 0 0;
            margin-top: 1rem;
            display: flex;
            justify-content: flex-end;
            gap: 1.5rem;
            border-top: 1px solid var(--google-light-gray);
        }

        @media (max-width: 768px) {
            .ads-action-bar {
                padding: 1rem 0;
                justify-content: space-between;
                border: none;
            }

            .btn-google {
                flex: 1;
                text-align: center;
                padding: 0.9rem;
            }
        }

        .btn-google {
            padding: 0.7rem 2.5rem;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: 0.2s;
            font-size: 0.95rem;
        }

        .btn-cancel {
            background: transparent;
            color: var(--google-blue);
        }

        .btn-next {
            background: var(--purple-gradient);
            color: #fff;
            box-shadow: 0 4px 15px rgba(75, 36, 145, 0.3);
        }

        .btn-next:hover {
            opacity: 0.9;
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(75, 36, 145, 0.4);
        }

        .btn-google:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ── Success ── */
        #successScreen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            z-index: 2000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }

        .loader {
            width: 24px;
            height: 24px;
            border: 3px solid #fff;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Duration Tabs */
        .duration-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 1.5rem;
        }

        .duration-tab {
            flex: 1;
            padding: 14px;
            border: 1px solid #ddd;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
            font-size: 0.9rem;
        }

        .duration-tab.active {
            background: var(--google-blue);
            color: #fff;
            border-color: var(--google-blue);
            box-shadow: 0 4px 10px rgba(26, 115, 232, 0.2);
        }

        .bottom-nav {
            z-index: 1002;
        }
    </style>
</head>

<body>
    <!-- Site Construction Notice -->
    <div class="site-notice-bar">
        <span class="notice-text">The site is building with <strong>Dexaz</strong></span>
        <a href="dexaz-partnership.html" class="btn-notice-learn">Learn More</a>
    </div>

    <header class="ads-header">
        <div class="header-left">
            <!-- Mobile Menu Toggle (Left) -->
            <button class="mobile-menu-toggle-btn-top" id="mobileMenuBtn"
                style="background: transparent; border: none; cursor: pointer; color: #333; margin-right: 10px;">
                <i data-lucide="menu"></i>
            </button>
            <a href="index.html" class="logo-container">
                <img src="logo.png" alt="TNPVC">
            </a>
            <div class="header-title-group">
                <span class="main-title">TNPVC Google Ads</span>
                <span class="sub-title">Official Partner Portal</span>
            </div>
        </div>
        <div class="header-right">
            <span class="ads-id-text" style="font-size: 0.8rem; color: var(--google-gray);">Ads ID: 812-269-6217</span>
        </div>
        <!-- Mobile Navigation Menu Overlay -->
        <div class="mobile-nav-overlay" id="mobileNav">
            <button class="close-menu" id="closeMenu"><i data-lucide="x"></i></button>
            <div class="mobile-nav-content">
                <a href="about.html">About</a>
                <a href="services.html">Services</a>
                <a href="gallery.html">Gallery</a>
                <a href="https://chat.whatsapp.com/IQGxuB3NY5AETizCRwZRJb" class="btn-zoho"
                    style="margin-top: 1rem;">Join Now</a>
            </div>
        </div>
    </header>

    <div class="main-container" id="megaContainer">
        <aside class="stepper-sidebar">
            <div class="step-item active unlocked" onclick="goToStep(1)" id="step1">
                <div class="step-number">1</div> Campaign settings
            </div>
            <div class="step-item hidden" onclick="goToStep(2)" id="step2">
                <div class="step-number">2</div> Keywords and ads
            </div>
            <div class="step-item hidden" onclick="goToStep(3)" id="step3">
                <div class="step-number">3</div> Company Assets
            </div>
            <div class="step-item hidden" onclick="goToStep(4)" id="step4">
                <div class="step-number">4</div> Budget & Duration
            </div>
            <div class="step-item hidden" onclick="goToStep(5)" id="step5">
                <div class="step-number">5</div> Review
            </div>
        </aside>

        <main class="content-area-wrap">
            <section class="form-section">
                <!-- STEP 1: SETTINGS -->
                <div class="step-content active" id="content1">
                    <h2>Select your campaign goal</h2>
                    <div class="goal-grid">
                        <div class="goal-card active" onclick="setGoal(this, 'Calls')"><i data-lucide="phone"></i>
                            <p>Get more calls</p>
                        </div>
                        <div class="goal-card" onclick="setGoal(this, 'Website')"><i data-lucide="swatch-book"></i>
                            <p>Website visits</p>
                        </div>
                        <div class="goal-card" onclick="setGoal(this, 'Store')"><i data-lucide="map-pin"></i>
                            <p>Physical store visits</p>
                        </div>
                        <div class="goal-card" onclick="setGoal(this, 'Leads')"><i data-lucide="user-check"></i>
                            <p>Generate leads</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="form-group">
                            <label>Business Name</label>
                            <input type="text" id="bizName" placeholder="Enter your Business Name"
                                oninput="liveUpdate()">
                        </div>
                        <div class="form-group">
                            <label>Target Location</label>
                            <input type="text" id="targetLoc" placeholder="Enter Target City or State"
                                oninput="liveUpdate()">
                        </div>

                        <!-- Dynamic Fields -->
                        <div class="form-group dynamic-field" id="fieldPhone">
                            <label>Phone Number</label>
                            <input type="tel" id="bizPhone" placeholder="+91 98765 43210" oninput="liveUpdate()">
                        </div>
                        <div class="form-group dynamic-field" id="fieldWebsite" style="display: none;">
                            <label>Website URL</label>
                            <input type="url" id="bizWebsite" placeholder="https://www.yourwebsite.com"
                                oninput="liveUpdate()">
                        </div>
                        <div class="form-group dynamic-field" id="fieldStore" style="display: none;">
                            <label>Store Detail / Address</label>
                            <textarea id="bizStore" rows="2" placeholder="Enter physical store address"
                                oninput="liveUpdate()"></textarea>
                        </div>
                        <div class="form-group dynamic-field" id="fieldLeads" style="display: none;">
                            <label>Lead Form Hook</label>
                            <input type="text" id="bizLeads" placeholder="e.g. Get a Free Quote" oninput="liveUpdate()">
                        </div>
                    </div>

                    <div class="ads-action-bar">
                        <button class="btn-google btn-cancel" onclick="window.history.back()">BACK</button>
                        <button class="btn-google btn-next" onclick="nextStep()">CONTINUE</button>
                    </div>
                </div>

                <!-- STEP 2: ADS -->
                <div class="step-content" id="content2">
                    <h2>Create your responsive text ad</h2>
                    <div class="card">
                        <div class="form-group">
                            <label>Final URL</label>
                            <input type="url" id="finalUrl" placeholder="https://www.yourwebsite.com"
                                oninput="liveUpdate()">
                        </div>
                        <div class="form-group">
                            <label>Headline 1 (Max 30)</label>
                            <input type="text" id="h1" maxlength="30" placeholder="Enter Ad Headline 1"
                                oninput="liveUpdate()">
                            <div class="char-count" id="c1">0 / 30</div>
                        </div>
                        <div class="form-group">
                            <label>Headline 2 (Max 30)</label>
                            <input type="text" id="h2" maxlength="30" placeholder="Enter Ad Headline 2"
                                oninput="liveUpdate()">
                            <div class="char-count" id="c2">0 / 30</div>
                        </div>
                        <div class="form-group">
                            <label>Ad Description (Max 90)</label>
                            <textarea id="d1" maxlength="90" rows="3" placeholder="Explain your specialty..."
                                oninput="liveUpdate()"></textarea>
                            <div class="char-count" id="c3">0 / 90</div>
                        </div>
                    </div>

                    <div class="ads-action-bar">
                        <button class="btn-google btn-cancel" onclick="prevStep()">BACK</button>
                        <button class="btn-google btn-next" onclick="nextStep()">CONTINUE</button>
                    </div>
                </div>

                <!-- STEP 3: COMPANY ASSETS -->
                <div class="step-content" id="content3">
                    <h2>Upload your Company Assets</h2>
                    <div class="card">
                        <div style="display: grid; grid-template-columns: 100px 1fr; gap: 15px;">
                            <div class="form-group">
                                <label>Ad Logo</label>
                                <input type="file" id="adLogoInput" hidden onchange="handleAdFile(this, 'Logo')">
                                <div onclick="document.getElementById('adLogoInput').click()" id="logoPreview"
                                    style="width:80px; height:80px; border:1px dashed #dbdbdb; border-radius:8px; display:flex; align-items:center; justify-content:center; cursor:pointer; overflow:hidden; background:#f9f9f9;">
                                    <i data-lucide="plus" size="20"></i>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Working Photos / Banner</label>
                                <input type="file" id="adImgInput" hidden onchange="handleAdFile(this, 'Image')">
                                <div onclick="document.getElementById('adImgInput').click()" id="imgPreview"
                                    style="width:100%; height:80px; border:1px dashed #dbdbdb; border-radius:8px; display:flex; align-items:center; justify-content:center; cursor:pointer; overflow:hidden; background:#f9f9f9;">
                                    <i data-lucide="image" size="24"></i>
                                    <span style="font-size:0.7rem; margin-left:5px; color:#8e8e8e;">Add Photos</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Keywords (For targeting)</label>
                            <textarea id="kw" rows="3" placeholder="upvc windows price, pvc doors near me, etc."
                                oninput="liveUpdate()"></textarea>
                        </div>
                    </div>

                    <div class="ads-action-bar">
                        <button class="btn-google btn-cancel" onclick="prevStep()">BACK</button>
                        <button class="btn-google btn-next" onclick="nextStep()">CONTINUE</button>
                    </div>
                </div>

                <!-- STEP 4: BUDGET & PAYMENT -->
                <div class="step-content" id="content4">
                    <h2>Set your budget and duration</h2>

                    <div class="form-group">
                        <label>Select Duration</label>
                        <div class="duration-tabs">
                            <div class="duration-tab active" onclick="setDuration(this, '1 Day')">1 Day Campaign</div>
                            <div class="duration-tab" onclick="setDuration(this, '1 Week')">1 Week Campaign</div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="form-group">
                            <label>Daily Budget</label>
                            <div style="display: flex; gap: 15px; align-items: center;">
                                <span style="font-size: 2rem; font-weight: 300; opacity: 0.5;">₹</span>
                                <input type="number" id="budgetInput" value="500"
                                    style="font-size: 2rem; font-weight: 700; border: none; border-bottom: 2px solid #eee; border-radius: 0;"
                                    oninput="liveUpdate()">
                            </div>
                        </div>
                        <div
                            style="background: #e7f3ff; padding: 1.5rem; border-radius: 12px; border: 1px solid #c2e0ff;">
                            <div style="display: flex; gap: 10px; color: var(--google-blue); align-items: center;">
                                <i data-lucide="info" style="width: 20px;"></i>
                                <span style="font-weight: 700;">Performance Estimate</span>
                            </div>
                            <p style="font-size: 1.3rem; font-weight: 700; margin-top: 10px; color: #111;"
                                id="estResults">450 —
                                1,250 clicks</p>
                            <p style="font-size: 0.85rem; color: #5f6368; margin-top: 5px;" id="estPeriod">Based on
                                1-day duration.</p>
                        </div>
                    </div>

                    <div class="ads-action-bar">
                        <button class="btn-google btn-cancel" onclick="prevStep()">BACK</button>
                        <button class="btn-google btn-next" onclick="nextStep()">CONTINUE</button>
                    </div>
                </div>

                <!-- STEP 5: REVIEW -->
                <div class="step-content" id="content5">
                    <h2>Review your campaign</h2>
                    <div id="reviewDisplay">
                        <!-- Filled by JS -->
                    </div>
                    <div
                        style="padding: 1.2rem; background: #fff8e1; border-radius: 8px; border: 1px solid #ffe082; display: flex; gap: 12px; margin-top: 1.5rem;">
                        <i data-lucide="shield-check" style="width: 24px; color: #f57f17; flex-shrink: 0;"></i>
                        <p style="font-size: 0.85rem; color: #5f6368; line-height: 1.5;">Your campaign will be activated
                            after a quick manual verification by the TNPVC team to ensure Google compliance.</p>
                    </div>

                    <div class="ads-action-bar">
                        <button class="btn-google btn-cancel" onclick="prevStep()">BACK</button>
                        <button class="btn-google btn-next" id="publishBtn" onclick="nextStep()">PUBLISH AD &
                            SYNC</button>
                    </div>
                </div>
            </section>

            <!-- PREVIEW SIDEBAR (RIGHT SIDE) -->
            <aside class="preview-column">
                <div class="preview-sticky">
                    <p
                        style="font-size: 0.8rem; font-weight: 800; color: var(--google-gray); margin-bottom: 15px; text-transform: uppercase; letter-spacing: 0.5px;">
                        Live Ad Preview</p>
                    <div class="google-ad-preview">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                            <div id="prevLogo"
                                style="width: 28px; height: 28px; border-radius: 50%; background: #f0f0f0; display: none; overflow: hidden; flex-shrink: 0;">
                            </div>
                            <div class="preview-tag" style="margin-bottom: 0;">
                                <span
                                    style="border: 1px solid #202124; padding: 0 4px; border-radius: 2px; font-size: 0.65rem;">Ad</span>
                                <span id="prevUrl"
                                    style="font-weight: 700; font-size: 0.8rem;">www.tnpvc-association.org</span>
                                <i data-lucide="chevron-down" style="width: 14px;"></i>
                            </div>
                        </div>
                        <div class="preview-headline" id="prevHead" onclick="goToStep(2)">Your Headline 1 | Your
                            Headline 2</div>
                        <div class="preview-desc" id="prevDesc">Enter your ad description above to see exactly how it
                            will appear on Google search results.</div>
                        <div id="prevImage"
                            style="width: 100%; height: 160px; border-radius: 8px; margin-top: 12px; display: none; overflow: hidden; background: #f0f0f0;">
                        </div>
                        <div id="prevCTA"
                            style="margin-top: 12px; font-size: 0.85rem; font-weight: 500; color: #1a0dab; display: flex; align-items: center; gap: 6px;">
                            <!-- CTA injected via JS -->
                        </div>
                    </div>

                    <div
                        style="margin-top: 2.5rem; background: #fff; padding: 1.5rem; border: 1px solid #eee; border-radius: 12px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: 0.9rem; color: var(--google-gray); font-weight: 500;">Est. Weekly
                                Reach</span>
                            <span style="font-weight: 700; color: var(--google-blue);">~24.5K</span>
                        </div>
                        <div
                            style="width: 100%; height: 8px; background: #f0f0f0; border-radius: 4px; overflow: hidden; margin: 12px 0;">
                            <div style="width: 82%; height: 100%; background: var(--google-blue);"></div>
                        </div>
                        <p style="font-size: 0.75rem; color: var(--google-gray); line-height: 1.4;">Based on similar
                            businesses in <b>Tamil Nadu</b> and your selected daily budget.</p>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <!-- SUCCESS SCREEN -->
    <div id="successScreen">
        <div
            style="width: 100px; height: 100px; background: #e6f4ea; color: var(--google-green); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 2rem; box-shadow: 0 10px 30px rgba(30,142,62,0.15);">
            <i data-lucide="check-circle-2" style="width: 50px; height: 50px;"></i>
        </div>
        <h1 style="font-size: 2.2rem; font-weight: 400; color: #202124; margin-bottom: 1rem;">Payment & Ad Details
            Synced</h1>
        <p
            style="color: var(--google-gray); margin-bottom: 3.5rem; max-width: 520px; line-height: 1.7; font-size: 1.1rem;">
            Your campaign request has been received. Our admin will contact you shortly to confirm the sync. Your ad
            will go live across Google Search and Maps in 48 hours.</p>
        <button class="btn-google btn-next" onclick="location.href='index.html'" style="padding: 1.2rem 4rem;">RETURN TO
            DASHBOARD</button>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
        <a href="our-craft.html" class="bottom-nav-item">
            <i data-lucide="swatch-book"></i>
            <span data-i18n="nav_our_craft">Our Craft</span>
        </a>
        <a href="ads.html" class="bottom-nav-item active">
            <i data-lucide="rocket"></i>
            <span data-i18n="nav_ads">Ads</span>
        </a>
        <a href="index.html" class="bottom-nav-item center-btn">
            <img src="logo.png" class="center-logo" alt="TNPVC Home">
        </a>
        <a href="feed.html" class="bottom-nav-item">
            <i data-lucide="layout-list"></i>
            <span data-i18n="nav_blog">Feed</span>
        </a>
        <a href="dexaz-partnership.html" class="bottom-nav-item">
            <img src="dexaz.png" class="bottom-nav-img" alt="Dexaz">
            <span data-i18n="nav_dexaz">Dexaz</span>
        </a>
    </nav>

    <script src="i18n.js"></script>
    <script>
        let currentUser = null;
        const savedUser = localStorage.getItem('tnpvc_user');
        if (savedUser) {
            currentUser = JSON.parse(savedUser);
            if (currentUser.name) currentUser.name = currentUser.name.trim();
        } else {
            window.location.href = 'feed.html';
        }

        lucide.createIcons();
        let currentStep = 1;
        let maxReachedStep = 1;
        let selectedGoal = 'Calls';
        let selectedDuration = '1 Day';
        let isPublishing = false;
        let adLogoData = null;
        let adImgData = null;

        function handleAdFile(input, type) {
            if (input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const data = e.target.result;
                    if (type === 'Logo') {
                        adLogoData = data;
                        document.getElementById('logoPreview').innerHTML = `<img src="${data}" style="width:100%; height:100%; object-fit:contain;">`;
                    } else {
                        adImgData = data;
                        document.getElementById('imgPreview').innerHTML = `<img src="${data}" style="width:100%; height:100%; object-fit:cover;">`;
                    }
                    liveUpdate();
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function setGoal(el, goal) {
            document.querySelectorAll('.goal-card').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            selectedGoal = goal;

            // Handle dynamic fields
            document.querySelectorAll('.dynamic-field').forEach(f => f.style.display = 'none');
            if (goal === 'Calls') document.getElementById('fieldPhone').style.display = 'block';
            if (goal === 'Website') document.getElementById('fieldWebsite').style.display = 'block';
            if (goal === 'Store') document.getElementById('fieldStore').style.display = 'block';
            if (goal === 'Leads') document.getElementById('fieldLeads').style.display = 'block';

            updateStepperLabels(); // Update stepper if needed
            liveUpdate();
        }

        function updateStepperLabels() {
            // Optional: can update labels based on goal
        }

        function setDuration(el, dur) {
            document.querySelectorAll('.duration-tab').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            selectedDuration = dur;
            liveUpdate();
        }

        function goToStep(n) {
            if (isPublishing) return;

            // Allow going forward ONLY if the current step is valid
            if (n > currentStep) {
                if (!validateStep(currentStep)) return;
            }

            document.querySelectorAll('.step-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.step-item').forEach(i => i.classList.remove('active'));

            document.getElementById('content' + n).classList.add('active');
            const stepEl = document.getElementById('step' + n);
            stepEl.classList.add('active');
            stepEl.classList.add('unlocked');
            stepEl.classList.remove('hidden');

            if (n > maxReachedStep) maxReachedStep = n;

            // Visibility Logic
            for (let i = 1; i <= 5; i++) {
                const el = document.getElementById('step' + i);

                // Add completed class for steps already done
                if (i < n) el.classList.add('completed');
                else el.classList.remove('completed');

                // UNLOCKED STATE
                if (i <= maxReachedStep) el.classList.add('unlocked');
                else el.classList.remove('unlocked');

                // STEP VISIBILITY: On mobile, ONLY show the current step 'n'
                if (window.innerWidth <= 768) {
                    if (i === n) el.classList.remove('hidden');
                    else el.classList.add('hidden');
                } else {
                    // Desktop: Show current, previous reached, and immediate next
                    if (i <= maxReachedStep + 1) el.classList.remove('hidden');
                    else el.classList.add('hidden');
                }
            }

            currentStep = n;
            if (currentStep === 5) {
                updateReview();
            }

            // Save Progress
            localStorage.setItem('tnpvc_current_step', n);
            if (n > maxReachedStep) {
                maxReachedStep = n;
                localStorage.setItem('tnpvc_max_reached', maxReachedStep);
            }
            window.scrollTo(0, 0);
        }

        function nextStep() {
            if (currentStep < 5) goToStep(currentStep + 1); else publish();
        }

        function prevStep() {
            if (currentStep > 1) goToStep(currentStep - 1); else window.history.back();
        }

        function validateStep(n) {
            if (n === 1) {
                const name = document.getElementById('bizName').value.trim();
                const loc = document.getElementById('targetLoc').value.trim();
                if (!name) { alert('Business Name is required'); return false; }
                if (!loc) { alert('Target Location is required'); return false; }

                if (selectedGoal === 'Calls' && !document.getElementById('bizPhone').value.trim()) { alert('Phone Number is required'); return false; }
                if (selectedGoal === 'Website' && !document.getElementById('bizWebsite').value.trim()) { alert('Website URL is required'); return false; }
                if (selectedGoal === 'Store' && !document.getElementById('bizStore').value.trim()) { alert('Store Address is required'); return false; }
                if (selectedGoal === 'Leads' && !document.getElementById('bizLeads').value.trim()) { alert('Lead Hook is required'); return false; }

                // Uniqueness Check (Local Emulation)
                const registeredNames = JSON.parse(localStorage.getItem('tnpvc_registered_ads') || '[]');
                if (registeredNames.includes(name.toLowerCase())) {
                    alert('This Business Name is already registered for an active campaign.');
                    return false;
                }
            }
            if (n === 2) {
                if (!document.getElementById('finalUrl').value) { alert('Final URL is required'); return false; }
                if (!document.getElementById('h1').value || !document.getElementById('h2').value) { alert('Provide both Headlines for better performance'); return false; }
                if (!document.getElementById('d1').value) { alert('Ad Description is required'); return false; }
            }
            if (n === 4) {
                const bud = document.getElementById('budgetInput').value;
                if (!bud || bud < 100) { alert('Minimum daily budget is ₹100'); return false; }
            }
            return true;
        }

        function liveUpdate() {
            const h1 = document.getElementById('h1').value || 'Enter Headline 1';
            const h2 = document.getElementById('h2').value || 'Enter Headline 2';
            const d1 = document.getElementById('d1').value || 'Enter your ad description above to see exactly how it will appear on Google search results.';
            const url = document.getElementById('finalUrl').value || 'www.yourwebsite.com';

            document.getElementById('prevHead').innerText = h1 + ' | ' + h2;
            document.getElementById('prevDesc').innerText = d1;
            document.getElementById('prevUrl').innerText = url.replace('https://', '').replace('http://', '').split('/')[0];

            if (adLogoData) {
                document.getElementById('prevLogo').style.display = 'block';
                document.getElementById('prevLogo').innerHTML = `<img src="${adLogoData}" style="width: 100%; height: 100%; object-fit: contain;">`;
            } else {
                document.getElementById('prevLogo').style.display = 'none';
            }

            if (adImgData) {
                document.getElementById('prevImage').style.display = 'block';
                document.getElementById('prevImage').innerHTML = `<img src="${adImgData}" style="width: 100%; height: 100%; object-fit: cover;">`;
            } else {
                document.getElementById('prevImage').style.display = 'none';
            }

            let ctaHTML = '';
            if (selectedGoal === 'Calls') {
                const phone = document.getElementById('bizPhone').value || '+91 98765 43210';
                ctaHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg> <span>Call ${phone}</span>`;
            } else if (selectedGoal === 'Website') {
                const web = document.getElementById('bizWebsite').value || 'Visit Website';
                ctaHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg> <span>${web}</span>`;
            } else if (selectedGoal === 'Store') {
                const adr = document.getElementById('bizStore').value || 'Get Directions';
                ctaHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg> <span>${adr}</span>`;
            } else if (selectedGoal === 'Leads') {
                const hook = document.getElementById('bizLeads').value || 'Get a Free Quote';
                ctaHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg> <span>${hook}</span>`;
            }
            document.getElementById('prevCTA').innerHTML = ctaHTML;

            const budget = parseInt(document.getElementById('budgetInput').value) || 0;
            const mult = selectedDuration === '1 Week' ? 7 : 1;
            const low = (budget * 0.8 * mult).toFixed(0);
            const high = (budget * 2.5 * mult).toFixed(0);

            document.getElementById('estResults').innerText = budget > 0 ? `${parseInt(low).toLocaleString()} — ${parseInt(high).toLocaleString()} clicks` : 'Set budget for estimate';
            document.getElementById('estPeriod').innerText = `Total for ${selectedDuration}: ₹${(budget * mult).toLocaleString()}`;

            // Counters
            document.getElementById('c1').innerText = document.getElementById('h1').value.length + ' / 30';
            document.getElementById('c2').innerText = document.getElementById('h2').value.length + ' / 30';
            document.getElementById('c3').innerText = document.getElementById('d1').value.length + ' / 90';

            // Save Form Data
            const formData = {
                bizName: document.getElementById('bizName').value,
                targetLoc: document.getElementById('targetLoc').value,
                bizPhone: document.getElementById('bizPhone').value,
                bizWebsite: document.getElementById('bizWebsite').value,
                bizStore: document.getElementById('bizStore').value,
                bizLeads: document.getElementById('bizLeads').value,
                finalUrl: document.getElementById('finalUrl').value,
                h1: document.getElementById('h1').value,
                h2: document.getElementById('h2').value,
                d1: document.getElementById('d1').value,
                kw: document.getElementById('kw').value,
                budgetInput: document.getElementById('budgetInput').value,
                selectedGoal: selectedGoal,
                selectedDuration: selectedDuration,
                adLogo: adLogoData,
                adImg: adImgData
            };
            localStorage.setItem('tnpvc_ad_form_data', JSON.stringify(formData));
        }

        function updateReview() {
            const biz = document.getElementById('bizName').value || 'Unspecified';
            const loc = document.getElementById('targetLoc').value || 'Target Areas';
            const bud = document.getElementById('budgetInput').value || 0;
            const mult = selectedDuration === '1 Week' ? 7 : 1;
            const h1 = document.getElementById('h1').value || 'Headline 1';
            const h2 = document.getElementById('h2').value || 'Headline 2';
            const desc = document.getElementById('d1').value || 'Ad description...';

            const html = `
                <div class="card" style="border-left: 4px solid var(--tnpvc-purple); padding: 1.25rem; margin-bottom: 0.75rem;">
                    <div style="font-size: 0.7rem; font-weight: 800; color: var(--tnpvc-purple); text-transform: uppercase; margin-bottom: 12px; letter-spacing: 0.5px; opacity: 0.8;">Campaign Details</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <p style="font-size: 0.75rem; color: #70757a; margin: 0;">Business</p>
                            <p style="font-weight: 600; font-size: 0.9rem; margin: 0;">${biz}</p>
                        </div>
                        <div>
                            <p style="font-size: 0.75rem; color: #70757a; margin: 0;">Location</p>
                            <p style="font-weight: 600; font-size: 0.9rem; margin: 0;">${loc}</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="border-left: 4px solid #1a73e8; padding: 1.25rem; margin-bottom: 0.75rem;">
                    <div style="font-size: 0.7rem; font-weight: 800; color: #1a73e8; text-transform: uppercase; margin-bottom: 12px; letter-spacing: 0.5px; opacity: 0.8;">Search Ad Creative</div>
                    <div style="padding: 10px; border: 1px solid #f0f0f0; border-radius: 6px; background: #fafafa; word-wrap: break-word;">
                        <p style="color: #3c4043; font-size: 0.7rem; font-weight: 700; margin-bottom: 3px; display: flex; align-items: center; gap: 4px;">
                            <span style="border: 1px solid #3c4043; padding: 0 2px; border-radius: 2px; font-size: 0.6rem;">Ad</span>
                            ${document.getElementById('finalUrl').value.replace(/https?:\/\//, '').split('/')[0] || 'yourwebsite.com'}
                        </p>
                        <h4 style="color: #1a0dab; margin: 0; font-size: 1.05rem; font-weight: 400; line-height: 1.2; word-break: break-all;">${h1} | ${h2}</h4>
                        <p style="font-size: 0.8rem; color: #4d5156; margin: 4px 0 0; line-height: 1.4; word-break: break-all;">${desc}</p>
                        ${adImgData ? `<div style="margin-top: 10px; width: 100%; height: 120px; border-radius: 6px; overflow: hidden;"><img src="${adImgData}" style="width: 100%; height: 100%; object-fit: cover;"></div>` : ''}
                    </div>
                </div>
                
                <div class="card" style="background: #fdfdfd; border-left: 4px solid var(--google-green); padding: 1.25rem; margin-bottom: 0;">
                    <div style="font-size: 0.7rem; font-weight: 800; color: var(--google-green); text-transform: uppercase; margin-bottom: 12px; letter-spacing: 0.5px; opacity: 0.8;">Budget & Sync</div>
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <p style="font-size: 0.75rem; color: #70757a; margin: 0;">Total Sync Amount</p>
                            <p style="font-size: 1.6rem; font-weight: 800; color: #1e8e3e; margin: 0;">₹${(bud * mult).toLocaleString()}</p>
                        </div>
                        <div style="text-align: right;">
                             <span style="background: #e6f4ea; color: #1e8e3e; padding: 3px 10px; border-radius: 4px; font-size: 0.7rem; font-weight: 700; border: 1px solid rgba(30,142,62,0.15);">READY</span>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('reviewDisplay').innerHTML = html;
        }

        function publish() {
            if (isPublishing) return;
            isPublishing = true;

            const biz = document.getElementById('bizName').value;
            const bud = document.getElementById('budgetInput').value;
            const mult = selectedDuration === '1 Week' ? 7 : 1;
            const amount = bud * mult;

            document.getElementById('publishBtn').innerHTML = '<span class="loader"></span> INITIALIZING SECURE SYNC...';
            document.getElementById('publishBtn').disabled = true;

            const syncData = {
                biz: biz,
                ads: document.getElementById('h1').value + ' | ' + document.getElementById('h2').value,
                desc: document.getElementById('d1').value,
                url: document.getElementById('finalUrl').value,
                keywords: document.getElementById('kw').value,
                goal: selectedGoal,
                duration: selectedDuration,
                amount: amount,
                timestamp: new Date().toLocaleString()
            };

            // Register Business Name locally to prevent duplicates
            const registered = JSON.parse(localStorage.getItem('tnpvc_registered_ads') || '[]');
            registered.push(biz.toLowerCase());
            localStorage.setItem('tnpvc_registered_ads', JSON.stringify(registered));

            // Generate UPI Deep Link
            const upiUrl = `upi://pay?pa=8122696217@ybl&pn=TNPVC%20Ads&am=${amount}&cu=INR&tn=AD_SYNC_${biz.replace(/\s+/g, '_')}`;

            // Generate WhatsApp Sync Message
            let msg = `⚡ *TNPVC GOOGLE ADS SYNC REQUEST*%0A---------------------------%0A🏢 *Business:* ${syncData.biz}%0A🎯 *Goal:* ${syncData.goal}%0A🕒 *Duration:* ${syncData.duration}%0A💰 *Total:* ₹${syncData.amount}%0A🔗 *URL:* ${syncData.url}%0A📝 *Headline:* ${syncData.ads}%0A📅 *Date:* ${syncData.timestamp}`;
            if (adLogoData) msg += `%0A🖼️ *Has Logo:* Yes`;
            if (adImgData) msg += `%0A📸 *Has Banner Image:* Yes`;

            const waUrl = `https://wa.me/918122696217?text=${msg}`;

            // 1. Save to Local Feed for Persistence
            const publishedAds = JSON.parse(localStorage.getItem('tnpvc_all_published_ads') || '[]');
            publishedAds.unshift({
                id: Date.now(),
                user: currentUser ? currentUser.name.trim() : 'Anonymous',
                biz: syncData.biz,
                headline: syncData.ads,
                desc: syncData.desc,
                url: syncData.url,
                logo: adLogoData,
                image: adImgData,
                goal: syncData.goal,
                cta: document.getElementById('prevCTA').innerHTML,
                time: syncData.timestamp
            });
            localStorage.setItem('tnpvc_all_published_ads', JSON.stringify(publishedAds));

            // 2. Open UPI for Payment
            window.location.href = upiUrl;

            // 3. Delay sync to WhatsApp to allow UPI intent to complete
            setTimeout(() => {
                // Background Sync Simulation
                window.location.href = waUrl;

                // Show Success Screen
                document.getElementById('megaContainer').style.display = 'none';
                document.querySelector('.ads-action-bar').style.display = 'none';
                document.querySelector('.ads-header').style.display = 'none';
                document.getElementById('successScreen').style.display = 'flex';
                clearTNPVCPersistence();
                lucide.createIcons();
            }, 2500);
        }

        // Restore Progress on Load
        window.addEventListener('load', () => {
            if (currentUser && currentUser.shop) {
                document.getElementById('bizName').value = currentUser.shop;
            }

            const savedData = localStorage.getItem('tnpvc_ad_form_data');
            if (savedData) {
                const data = JSON.parse(savedData);
                document.getElementById('bizName').value = data.bizName || '';
                document.getElementById('targetLoc').value = data.targetLoc || '';
                document.getElementById('bizPhone').value = data.bizPhone || '';
                document.getElementById('bizWebsite').value = data.bizWebsite || '';
                document.getElementById('bizStore').value = data.bizStore || '';
                document.getElementById('bizLeads').value = data.bizLeads || '';
                document.getElementById('finalUrl').value = data.finalUrl || '';
                document.getElementById('h1').value = data.h1 || '';
                document.getElementById('h2').value = data.h2 || '';
                document.getElementById('d1').value = data.d1 || '';
                document.getElementById('kw').value = data.kw || '';
                document.getElementById('budgetInput').value = data.budgetInput || 500;
                selectedGoal = data.selectedGoal || 'Calls';
                selectedDuration = data.selectedDuration || '1 Day';
                adLogoData = data.adLogo || null;
                adImgData = data.adImg || null;

                if (adLogoData) document.getElementById('logoPreview').innerHTML = `<img src="${adLogoData}" style="width:100%; height:100%; object-fit:contain;">`;
                if (adImgData) document.getElementById('imgPreview').innerHTML = `<img src="${adImgData}" style="width:100%; height:100%; object-fit:cover;">`;

                // Restore active UI states
                document.querySelectorAll('.goal-card').forEach(c => {
                    if (c.innerText.toLowerCase().includes(selectedGoal.toLowerCase())) c.classList.add('active');
                    else c.classList.remove('active');
                });
                document.querySelectorAll('.duration-tab').forEach(t => {
                    if (t.innerText.toLowerCase().includes(selectedDuration.toLowerCase())) t.classList.add('active');
                    else t.classList.remove('active');
                });
            }

            const savedMax = localStorage.getItem('tnpvc_max_reached');
            if (savedMax) maxReachedStep = parseInt(savedMax);

            const savedStep = localStorage.getItem('tnpvc_current_step');
            if (savedStep) goToStep(parseInt(savedStep));
            else liveUpdate();
        });

        // Clear persistence on success
        function clearTNPVCPersistence() {
            localStorage.removeItem('tnpvc_current_step');
            localStorage.removeItem('tnpvc_max_reached');
            localStorage.removeItem('tnpvc_ad_form_data');
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        function triggerFireball() {
            if (typeof confetti !== 'function') return;
            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 99999 };
            function randomInRange(min, max) { return Math.random() * (max - min) + min; }
            const interval = setInterval(function () {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                const particleCount = 50 * (timeLeft / duration);
                confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: randomInRange(0.4, 0.6) } });
                confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: randomInRange(0.4, 0.6) } });
            }, 250);
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const x = randomInRange(0.2, 0.8);
                    const y = randomInRange(0.2, 0.5);
                    confetti({
                        particleCount: 150,
                        spread: 120,
                        origin: { x, y },
                        colors: ['#ff0000', '#ffd700', '#1877f2', '#ffffff', '#25D366'],
                        zIndex: 99999,
                        gravity: 1.2,
                        scalar: 1.2,
                        drift: randomInRange(-0.5, 0.5)
                    });
                }, i * 350);
            }
        }

        // Mobile Menu Logic
        const mobileToggle = document.getElementById('mobileMenuBtn');
        const mobileNav = document.getElementById('mobileNav');
        const closeMenu = document.getElementById('closeMenu');

        if (mobileToggle && mobileNav && closeMenu) {
            mobileToggle.addEventListener('click', () => {
                mobileNav.classList.add('active');
                document.body.style.overflow = 'hidden';
            });

            closeMenu.addEventListener('click', () => {
                mobileNav.classList.remove('active');
                document.body.style.overflow = '';
            });

            mobileNav.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileNav.classList.remove('active');
                    document.body.style.overflow = '';
                });
            });
        }

        liveUpdate();
    </script>
</body>

</html>