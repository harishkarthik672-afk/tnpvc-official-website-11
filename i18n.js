const translations = {
    "en": {
        "nav_about": "About",
        "nav_services": "Services",
        "nav_network": "Network",
        "nav_gallery": "Gallery",
        "nav_menu": "Menu",
        "nav_join_now": "Join Now",
        "gallery_title": "Our Project Showcase",
        "gallery_subtitle": "A closer look at the craftsmanship and quality delivered by TNPVC across Tamil Nadu.",
        "hero_title": "Trusted uPVC & PVC Solutions<br>for Homes and Buildings",
        "visionary_leader": "The Visionary Leader",
        "visionary_desc": "R. Srinivasan - The driving force behind Tamil Nadu's interior revolution.",
        "hero_subtitle": "TNPVC connects homeowners and builders with verified teams for uPVC windows, PVC doors, ceilings, wall panels, and complete on-site installation across Tamil Nadu.",
        "get_started": "Book Site Visit",
        "access_network": "View Our Services",
        "featured_networks": "Core Service Teams",
        "contractors": "Installation Partners",
        "contractors_desc": "Verified teams for home and commercial fitting work.",
        "workers": "Skilled Fabricators",
        "workers_desc": "Trained professionals for uPVC/PVC cutting, assembly, and finishing.",
        "suppliers": "Material Suppliers",
        "suppliers_desc": "Direct sourcing of quality profiles, sheets, fittings, and hardware.",
        "managed_tools": "Project Support",
        "managed_tools_desc": "Site survey, measurement, costing, and execution tracking.",
        "explore_all": "Explore all services",
        "india_no1": "Tamil Nadu's Trusted uPVC & PVC Network - TNPVC",
        "all_in_one": "End-to-end PVC solutions",
        "tnpvc_network": "TNPVC Service Network",
        "digital_foundation": "Planning, fabrication, and installation in one flow.",
        "network_desc": "Manage your complete uPVC/PVC project with TNPVC from design consultation to material selection, fabrication, delivery, and final installation.",
        "try_network": "GET TNPVC SUPPORT",
        "testimonial_quote": "\"Whether it is one home, an apartment block, or a commercial space, TNPVC delivered clean finishing and on-time installation.\"",
        "siranthan_title": "Project Client",
        "enterprise_for": "TNPVC FOR",
        "enterprise": "Labours",
        "enterprise_desc": "Get dedicated execution support for villas, apartments, and commercial projects with TNPVC's verified uPVC/PVC vendor ecosystem and project-ready teams.",
        "enterprise_contractors": "Contractors",
        "enterprise_contractors_desc": "Verified project partners for home and commercial fitting work. Professional management from site survey to final delivery.",
        "enterprise_suppliers": "Material Suppliers",
        "enterprise_suppliers_desc": "Direct connection to premium grade PVC/uPVC material traders. Sourcing verified profiles, hardware, and accessories easily.",
        "enterprise_engineers": "Engineers & Builders",
        "enterprise_engineers_desc": "Technical support and design-to-delivery management for large scale buildings, apartments, and premium interior projects.",
        "learn_more": "VIEW DETAILS",
        "made_in_tn": "Built in Tamil Nadu.<br>Built for Durable Spaces.",
        "prof_workers": "Skilled<br>Installers",
        "ver_contractors": "Verified<br>Project Partners",
        "high_quality_suppliers": "Premium Grade<br>PVC/uPVC Suppliers",
        "districts_served": "Districts Across<br>Tamil Nadu Covered",
        "years_trust": "Years of On-site<br>Execution Experience",
        "manager": "Operations Manager",
        "privacy_title": "Your project details are safe with TNPVC",
        "privacy_desc": "From site measurements to customer contacts, we handle every detail responsibly and use your information only to plan, execute, and support your uPVC/PVC work.",
        "core_values": "The values that guide<br>every TNPVC project",
        "long_term": "Long-term reliability",
        "long_term_desc": "We build lasting customer relationships through consistent service quality, durable materials, and dependable after-installation support.",
        "quality_prof": "Quality & workmanship",
        "quality_prof_desc": "Every profile, fitting, and installation step is checked for finish, alignment, and durability to maintain high project standards.",
        "member_first": "Customer-first approach",
        "member_first_desc": "From first consultation to final handover, our teams focus on clear communication, transparent pricing, and on-time completion.",
        "read_story": "READ CLIENT STORIES",
        "ready_work": "Planning a uPVC or PVC project?",
        "lets_start": "Let's schedule your site inspection.",
        "join_network_cta": "CONNECT WITH TNPVC",
        "recent_projects": "Our Recent Successful Projects",
        "view_services": "View Our Services",
        "download_tnpvc_app": "Download TNPVC Official App",
        "app_coming_soon": "Explore premium PVC and uPVC solutions curated for your home.",
        "book_consultation": "BOOK A FREE CONSULTATION",
        "read_our_story": "Read Article",
        "nav_blog": "Feed",
        "nav_our_craft": "Our Craft",
        "nav_ads": "Ads",
        "ads_title": "TNPVC Ads Manager",
        "new_campaign": "New Campaign",
        "overview": "Overview",
        "performance": "Performance",
        "billing": "Billing",
        "ad_sync_success": "Successfully synced with Google Network",
        "create_ad_title": "Create Your Ad Campaign",
        "select_goal": "Step 1: Select Your Goal",
        "launch_ad": "Launch Ad Campaign",
        "nav_dexaz": "Dexaz",
        "nav_signin": "Sign In",
        "footer_rights": "All Rights Reserved.",
        "developing_by": "Developing by",
        "learn_more_btn": "Learn More",
        "legal_contact": "Contact Us",
        "legal_security": "Security",
        "legal_compliance": "Workmanship Compliance",
        "legal_ipr": "IPR Complaints",
        "legal_safety": "Site Safety Policy",
        "legal_tos": "Terms of Service",
        "legal_privacy": "Privacy Policy",
        "legal_brand": "Brand Usage Policy",
        "legal_cookie": "Cookie Policy",
        "legal_data": "Customer Data Compliance",
        "nav_home": "Home",
        "nav_post": "Post",
        "nav_search": "Search",
        "nav_account": "Account"
    },
    "ta": {
        "nav_about": "பற்றி",
        "nav_services": "சேவைகள்",
        "nav_network": "பிணையம்",
        "nav_gallery": "கேலரி",
        "nav_menu": "மெனு",
        "nav_join_now": "இப்போது இணையுங்கள்",
        "gallery_title": "எங்கள் திட்டங்களின் தொகுப்பு",
        "gallery_subtitle": "தமிழ்நாடு முழுவதும் TNPVC வழங்கிய சிறந்த தரம் மற்றும் கைவேலைப்பாடுகள்.",
        "hero_title": "வீடு மற்றும் கட்டிடங்களுக்கு<br>நம்பகமான uPVC & PVC தீர்வுகள்",
        "visionary_leader": "தொலைநோக்குத் தலைவர்",
        "visionary_desc": "R. சீனிவாசன் - தமிழ்நாட்டின் இன்டீரியர் புரட்சியின் உந்துசக்தி.",
        "hero_subtitle": "தமிழ்நாடு முழுவதும் uPVC ஜன்னல், PVC கதவு, false ceiling, wall panel போன்ற பணிகளுக்கு TNPVC சரிபார்க்கப்பட்ட நிபுணர் அணிகளை இணைக்கிறது.",
        "get_started": "Site Visit பதிவு செய்யுங்கள்",
        "access_network": "எங்கள் சேவைகளை பார்க்க",
        "featured_networks": "முக்கிய சேவை அணிகள்",
        "contractors": "ஒப்பந்ததாரர்கள்",
        "contractors_desc": "பெரிய அளவிலான திட்டங்களுக்கான சரிபார்க்கப்பட்ட பில்டர்கள்.",
        "workers": "தொழிலாளர்கள்",
        "workers_desc": "தள செயல்பாட்டிற்கான திறமையான தொழிலாளர் தளம்.",
        "suppliers": "வழங்குநர்கள்",
        "suppliers_desc": "சரிபார்க்கப்பட்ட பொருள் மையங்களிலிருந்து நேரடி கொள்முதல்.",
        "managed_tools": "நிர்வகிக்கப்பட்ட கருவிகள்",
        "managed_tools_desc": "இணக்கம் மற்றும் திட்ட கண்காணிப்பு தொகுப்பு.",
        "explore_all": "அனைத்து சேவைகளையும் பார்க்க",
        "india_no1": "தமிழ்நாட்டின் நம்பகமான uPVC & PVC வலைப்பின்னல் - TNPVC",
        "all_in_one": "அனைத்தும் ஒரே தொகுப்பில்",
        "tnpvc_network": "TNPVC நெட்வொர்க்",
        "digital_foundation": "கட்டுமானத்திற்கான டிஜிட்டல் அடித்தளம்.",
        "network_desc": "எங்கள் ஒருங்கிணைந்த சுற்றுச்சூழல் அமைப்புடன் உங்கள் முழு திட்ட பணிப்பாய்வுகளையும் TNPVC இல் நடத்துங்கள்.",
        "try_network": "TNPVC உதவி பெறுங்கள்",
        "testimonial_quote": "\"நீங்கள் ஒரு உள்ளூர் ஒப்பந்ததாரராகவோ, நடுத்தர அளவிலான பில்டராகவோ அல்லது ஒரு பெரிய நிறுவனமாகவோ இருக்கலாம்-TNPVC நெட்வொர்க் அனைவருக்கும் ஒரு வரப்பிரசாதம்.\"",
        "siranthan_title": "தலைமை நிர்வாக அதிகாரி மற்றும் நிறுவனர்",
        "enterprise_for": "TNPVC க்காக",
        "enterprise": "தொழிலாளர்கள்",
        "enterprise_desc": "தள செயல்பாட்டிற்கான திறமையான தொழிலாளர்கள் மற்றும் சரிபார்க்கப்பட்ட அணிகளுடன் உங்கள் திட்டங்களை சிறப்பாக செயல்படுத்துங்கள்.",
        "enterprise_contractors": "ஒப்பந்ததாரர்கள்",
        "enterprise_contractors_desc": "வீடு மற்றும் வணிக கட்டுமான பணிகளுக்கான நம்பகமான ஒப்பந்ததாரர்கள். திட்ட மேலாண்மை முதல் இறுதி ஒப்படைப்பு வரை.",
        "enterprise_suppliers": "பொருள் வழங்குநர்கள்",
        "enterprise_suppliers_desc": "உயர்தர uPVC மற்றும் PVC பொருட்களை வழங்கும் சரிபார்க்கப்பட்ட வணிகர்களுடன் நேரடி தொடர்பு மற்றும் கொள்முதல்.",
        "enterprise_engineers": "உயர்தர பில்டர்கள்",
        "enterprise_engineers_desc": "பெரிய கட்டிடங்கள் மற்றும் அடுக்குமாடி குடியிருப்புகளுக்கான தொழில்நுட்ப ஆதரவு மற்றும் திட்ட மேற்பார்வை சேவைகள்.",
        "learn_more": "மேலும் அறிய",
        "made_in_tn": "தமிழ்நாட்டில் தயாரிக்கப்பட்டது.<br>உலகிற்காக உருவாக்கப்பட்டது.",
        "prof_workers": "தொழில்முறை<br>தொழிலாளர்கள்",
        "ver_contractors": "சரிபார்க்கப்பட்ட<br>ஒப்பந்ததாரர்கள்",
        "high_quality_suppliers": "உயர்தர<br>பொருள் வழங்குநர்கள்",
        "districts_served": "தமிழ்நாடு முழுவதும்<br>சேவை வழங்கப்படும் மாவட்டங்கள்",
        "years_trust": "நம்பிக்கை மற்றும் நேர்மை<br>கட்டியெழுப்பப்பட்ட ஆண்டுகள்",
        "manager": "மேலாளர்",
        "privacy_title": "உங்கள் திட்ட தகவல்கள் TNPVC-இல் பாதுகாப்பாக உள்ளன",
        "privacy_desc": "நம்பிக்கையே ஒரு உறவில் முதன்மையானது என்று நாங்கள் நம்புகிறோம். உங்கள் தரவை நாங்கள் விற்க மாட்டோம். மென்பொருள் உரிமக் கட்டணத்திலிருந்து மட்டுமே நாங்கள் பணம் சம்பாதிக்கிறோம்.",
        "core_values": "எங்களை வழிநடத்தும்<br>அடிப்படை மதிப்புகள் மற்றும் கொள்கைகள்",
        "long_term": "நீண்ட கால அர்ப்பணிப்பு",
        "long_term_desc": "25+ ஆண்டுகால தொழில்முறை அமைப்பு, வளரும் வணிகம் எதிர்கொள்ளும் சவால்களைப் பற்றிய நல்ல புரிதலை எங்களுக்கு வழங்குகிறது.",
        "quality_prof": "தரம் மற்றும் தொழில்முறை",
        "quality_prof_desc": "கட்டுமானம் எங்கள் கைவினை மற்றும் தரமான தரங்களில் எங்களது இடைவிடாத கவனத்துடன் அதை ஆதரிக்கிறோம்.",
        "member_first": "உறுப்பினர்-முதலில் தத்துவம்",
        "member_first_desc": "இந்த ஆண்டுகளில், எங்கள் உறுப்பினர்களின் நம்பிக்கை தான் எங்களை வலுவான நிலையில் நிலைநிறுத்த உதவியது.",
        "read_story": "எங்கள் கதையை படிக்கவும்",
        "ready_work": "uPVC அல்லது PVC project ஆரம்பிக்க தயாரா?",
        "lets_start": "உங்கள் site inspection-ஐ திட்டமிடலாம்.",
        "join_network_cta": "TNPVC-ஐ தொடர்பு கொள்ளுங்கள்",
        "recent_projects": "எங்கள் சமீபத்திய வெற்றிகரமான திட்டங்கள்",
        "view_services": "எங்கள் சேவைகளை பார்க்க",
        "download_tnpvc_app": "TNPVC அதிகாரப்பூர்வ செயலியைப் பதிவிறக்கவும்",
        "app_coming_soon": "உங்கள் வீட்டிற்கான பிரீமியம் PVC மற்றும் uPVC தீர்வுகளை ஆராயுங்கள்.",
        "book_consultation": "இலவச ஆलोசனையை பதிவு செய்யுங்கள்",
        "read_our_story": "கட்டுரையைப் படியுங்கள்",
        "nav_blog": "பதிவுகள்",
        "nav_our_craft": "எங்கள் கைவினை",
        "nav_ads": "விளம்பரங்கள்",
        "ads_title": "TNPVC விளம்பர மேலாளர்",
        "new_campaign": "புதிய விளம்பரம்",
        "overview": "பார்வை",
        "performance": "செயல்திறன்",
        "billing": "பணம் செலுத்துதல்",
        "ad_sync_success": "Google நெட்வொர்க்குடன் வெற்றிகரமாக இணைக்கப்பட்டது",
        "create_ad_title": "உங்கள் விளம்பரத்தை உருவாக்குங்கள்",
        "select_goal": "படி 1: உங்கள் இலக்கைத் தேர்வுசெய்க",
        "launch_ad": "விளம்பரத்தைத் தொடங்கு",
        "nav_dexaz": "Dexaz",
        "nav_signin": "உள்நுழை",
        "footer_rights": "அனைத்து உரிமைகளும் பாதுகாக்கப்பட்டவை.",
        "developing_by": "உருவாக்கம்",
        "learn_more_btn": "மேலும் அறிய",
        "legal_contact": "தொடர்பு கொள்ள",
        "legal_security": "பாதுகாப்பு",
        "legal_compliance": "பணி இணக்கம்",
        "legal_ipr": "IPR புகார்கள்",
        "legal_safety": "தள பாதுகாப்பு கொள்கை",
        "legal_tos": "சேவை விதிமுறைகள்",
        "legal_privacy": "தனியுரிமைக் கொள்கை",
        "legal_brand": "பிராண்ட் பயன்பாட்டுக் கொள்கை",
        "legal_cookie": "குக்கீ கொள்கை",
        "legal_data": "வாடிக்கையாளர் தரவு இணக்கம்",
        "nav_home": "முகப்பு",
        "nav_post": "பதிவு",
        "nav_search": "தேடல்",
        "nav_account": "கணக்கு"
    },
    "hi": {
        "nav_about": "हमारे बारे में",
        "nav_services": "सेवाएं",
        "nav_network": "नेटवर्क",
        "nav_gallery": "गैलरी",
        "nav_menu": "मेन्यू",
        "nav_join_now": "अभी शामिल हों",
        "gallery_title": "हमारे प्रोजेक्ट्स का प्रदर्शन",
        "gallery_subtitle": "तमिलनाडु भर में TNPVC द्वारा दी गई कारीगरी और गुणवत्ता की एक झलक।",
        "hero_title": "घर और बिल्डिंग के लिए<br>विश्वसनीय uPVC और PVC समाधान",
        "visionary_leader": "दूरदर्शी नेता",
        "visionary_desc": "आर. श्रीनिवासन - तमिलनाडु की इंटीरियर क्रांति के पीछे की प्रेरक शक्ति।",
        "hero_subtitle": "TNPVC तमिलनाडु भर में uPVC विंडो, PVC डोर, सीलिंग और पैनल वर्क के लिए सत्यापित टीमों से जोड़ता है।",
        "get_started": "Site Visit बुक करें",
        "access_network": "हमारी सेवाएं देखें",
        "featured_networks": "मुख्य सेवा टीमें",
        "contractors": "ठेकेदार",
        "contractors_desc": "बड़े पैमाने की परियोजनाओं के लिए सत्यापित बिल्डर।",
        "workers": "श्रमिक",
        "workers_desc": "साइट निष्पादन के लिए कुशल श्रम मंच।",
        "suppliers": "आपूर्तिकर्ता",
        "suppliers_desc": "सत्यापित सामग्री केंद्रों से सीधी खरीद।",
        "managed_tools": "प्रबंधित उपकरण",
        "managed_tools_desc": "अनुपालन और परियोजना ट्रैकिंग सूट।",
        "explore_all": "सभी सेवाएं देखें",
        "india_no1": "तमिलनाडु का विश्वसनीय uPVC और PVC नेटवर्क - TNPVC",
        "all_in_one": "ऑल-इन-वन सूट",
        "tnpvc_network": "TNPVC नेटवर्क",
        "digital_foundation": "निर्माण के लिए डिजिटल नींव।",
        "network_desc": "हमारे एकीकृत पारिस्थितिकी तंत्र सूट के साथ TNPVC पर अपना संपूर्ण प्रोजेक्ट वर्कफ़्लो चलाएं।",
        "try_network": "TNPVC सपोर्ट प्राप्त करें",
        "testimonial_quote": "\"आप एक स्थानीय ठेकेदार, मध्यम आकार के बिल्डर, या यहां तक कि एक बड़ी फर्म भी हो सकते हैं-TNPVC नेटवर्क सभी के लिए वरदान है।\"",
        "siranthan_title": "सीईओ और संस्थापक",
        "enterprise_for": "TNPVC के लिए",
        "enterprise": "श्रमिक",
        "enterprise_desc": "साइट निष्पादन के लिए कुशल श्रमिकों और सत्यापित टीमों के साथ अपनी परियोजनाओं को बेहतर ढंग से लागू करें।",
        "enterprise_contractors": "ठेकेदार",
        "enterprise_contractors_desc": "घर और व्यावसायिक निर्माण कार्यों के लिए विश्वसनीय ठेकेदार। साइट सर्वेक्षण से अंतिम वितरण तक पेशेवर प्रबंधन।",
        "enterprise_suppliers": "सामग्री आपूर्तिकर्ता",
        "enterprise_suppliers_desc": "उच्च गुणवत्ता वाली uPVC और PVC सामग्री प्रदान करने वाले सत्यापित व्यापारियों के साथ सीधा संपर्क और खरीद।",
        "enterprise_engineers": "बिल्डर्स",
        "enterprise_engineers_desc": "बड़े भवनों और अपार्टमेंट के लिए तकनीकी सहायता और परियोजना पर्यवेक्षण सेवाएं।",
        "learn_more": "अधिक जानें",
        "made_in_tn": "तमिलनाडु में निर्मित।<br>दुनिया के लिए निर्मित।",
        "prof_workers": "पेशेवर<br>श्रमिक",
        "ver_contractors": "सत्यापित<br>ठेकेदार",
        "high_quality_suppliers": "उच्च गुणवत्ता वाले<br>सामग्री आपूर्तिकर्ता",
        "districts_served": "तमिलनाडु भर के<br>जिले जहां सेवाएं उपलब्ध हैं",
        "years_trust": "भरोसे और अखंडता के<br>निर्माण के वर्ष",
        "manager": "प्रबंधक",
        "privacy_title": "आपकी प्रोजेक्ट जानकारी TNPVC के साथ सुरक्षित है",
        "privacy_desc": "हमारा मानना है कि किसी भी रिश्ते में भरोसा सर्वोपरि है। हम आपका डेटा बेचते नहीं हैं।",
        "core_values": "मूल मूल्य और सिद्धांत<br>जो हमें प्रेरित करते हैं",
        "long_term": "दीर्घकालिक प्रतिबद्धता",
        "long_term_desc": "25+ वर्षों से एक पेशेवर संगठन चलाने से हमें उन चुनौतियों का अच्छा बोध मिलता है जिनका सामना एक बढ़ता हुआ व्यवसाय करता है।",
        "quality_prof": "गुणवत्ता और व्यावसायिकता",
        "quality_prof_desc": "निर्माण हमारा शिल्प है और हम गुणवत्ता मानकों पर अपने निरंतर ध्यान के साथ इसका समर्थन करते हैं।",
        "member_first": "सदस्य-प्रथम दर्शन",
        "member_first_desc": "इन सभी वर्षों में, हमारे सदस्यों के भरोसे ने ही हमें एक मजबूत स्थिति स्थापित करने में मदद की है।",
        "read_story": "हमारी कहानी पढ़ें",
        "ready_work": "uPVC या PVC प्रोजेक्ट शुरू करना चाहते हैं?",
        "lets_start": "आइए आपका site inspection शेड्यूल करें।",
        "join_network_cta": "TNPVC से संपर्क करें",
        "recent_projects": "हमारी हालिया सफल परियोजनाएं",
        "view_services": "हमारी सेवाएं देखें",
        "download_tnpvc_app": "TNPVC आधिकारिक ऐप डाउनलोड करें",
        "app_coming_soon": "अपने घर के लिए क्यूरेट किए गए प्रीमियम पीवीसी और यूपीवीसी समाधानों का अन्वेषण करें।",
        "book_consultation": "नि:शुल्क परामर्श बुक करें",
        "read_our_story": "लेख पढ़ें",
        "nav_blog": "पोस्ट",
        "nav_our_craft": "हमारा शिल्प",
        "nav_ads": "विज्ञापन",
        "ads_title": "TNPVC विज्ञापन प्रबंधक",
        "new_campaign": "नया अभियान",
        "overview": "अवलोकन",
        "performance": "प्रदर्शन",
        "billing": "बिलिंग",
        "ad_sync_success": "Google नेटवर्क के साथ सफलतापूर्वक सिंक किया गया",
        "create_ad_title": "अपना विज्ञापन अभियान बनाएं",
        "select_goal": "चरण 1: अपना लक्ष्य चुनें",
        "launch_ad": "विज्ञापन अभियान शुरू करें",
        "nav_dexaz": "Dexaz",
        "nav_signin": "साइन इन",
        "footer_rights": "सर्वाधिकार सुरक्षित।",
        "developing_by": "विकासक",
        "learn_more_btn": "अधिक जानें",
        "legal_contact": "संपर्क करें",
        "legal_security": "सुरक्षा",
        "legal_compliance": "कार्य अनुपालन",
        "legal_ipr": "IPR शिकायतें",
        "legal_safety": "साइट सुरक्षा नीति",
        "legal_tos": "सेवा की शर्तें",
        "legal_privacy": "गोपनीयता नीति",
        "legal_brand": "ब्रांड उपयोग नीति",
        "legal_cookie": "कुकी नीति",
        "legal_data": "ग्राहक डेटा अनुपालन",
        "nav_home": "होम",
        "nav_post": "पोस्ट",
        "nav_search": "खोजें",
        "nav_account": "प्रोफ़ाइल"
    }
};

function updateLanguage(lang) {
    localStorage.setItem('selectedLang', lang);
    document.documentElement.lang = lang;
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            el.innerHTML = translations[lang][key];
        }
    });

    const currentLangText = document.getElementById('currentLang');
    if (currentLangText) {
        const langNames = {
            'en': 'English',
            'ta': 'தமிழ்',
            'hi': 'हिन्दी'
        };
        currentLangText.textContent = langNames[lang] || lang.toUpperCase();
    }

    if (window.lucide) {
        window.lucide.createIcons();
    }
}

// Exported Globals for dynamic content pages
window.TNPVC = {
    initScrollReveal: null
};

document.addEventListener('DOMContentLoaded', () => {
    let savedLang = 'en';
    try {
        savedLang = localStorage.getItem('selectedLang') || 'en';
    } catch (e) {
        // Silent catch for production
    }
    updateLanguage(savedLang);

    const langBtn = document.getElementById('langBtn');
    const langDropdown = document.getElementById('langDropdown');
    let touchHandled = false;

    if (langBtn && langDropdown) {
        const toggleDropdown = (e) => {
            e.preventDefault();
            e.stopPropagation();
            if (touchHandled) return;
            langDropdown.classList.toggle('active');
        };

        langBtn.addEventListener('click', toggleDropdown);

        langBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            e.stopPropagation();
            touchHandled = true;
            langDropdown.classList.toggle('active');
            setTimeout(() => { touchHandled = false; }, 400);
        }, { passive: false });

        document.addEventListener('click', (e) => {
            if (!langBtn.contains(e.target) && !langDropdown.contains(e.target)) {
                langDropdown.classList.remove('active');
            }
        });

        langDropdown.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const lang = link.getAttribute('data-lang');
                updateLanguage(lang);
                langDropdown.classList.remove('active');
            });
        });
    }

    // Global Scroll Reveal Initialization
    const initScrollReveal = () => {
        const revealOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, revealOptions);

        // Targeted elements for animation
        const selectors = [
            '.reveal', '.reveal-left', '.reveal-right', '.reveal-scale', '.stagger-parent',
            'section:not(.no-animate):not(.gallery-container):not(.pvc-container)',
            '.hero-content', '.feature-grid', '.app-item',
            '.help-card', '.pvc-item', '.gallery-item', '.team-card', '.footer-bottom > *'
        ];

        document.querySelectorAll(selectors.join(', ')).forEach(el => {
            if (!el.classList.contains('active')) {
                // Check if it should be revealed (avoiding elements that should already be visible)
                if (!el.classList.contains('reveal') &&
                    !el.classList.contains('reveal-left') &&
                    !el.classList.contains('reveal-right') &&
                    !el.classList.contains('reveal-scale') &&
                    !el.classList.contains('stagger-parent')) {
                    el.classList.add('reveal');
                }
                observer.observe(el);
            }
        });
    };

    window.TNPVC.initScrollReveal = initScrollReveal;
    initScrollReveal();

    const fixHeroVisibility = () => {
        if (window.innerWidth <= 768) {
            document.querySelectorAll('.hero-visual, .hero-overview-img, .customer-hero-visual').forEach(el => {
                el.style.opacity = '1';
                el.style.visibility = 'visible';
                el.style.display = 'block';
                el.classList.add('active'); // Force active for mobile hero
            });
        }
    };
    fixHeroVisibility();
    window.addEventListener('resize', fixHeroVisibility);

    window.addEventListener('storage', (e) => {
        if (e.key === 'selectedLang') {
            updateLanguage(e.newValue);
        }
    });

    // Auto-fix for dynamic content pages (Gallery/PVC)
    if (document.getElementById('galleryGrid') || document.getElementById('pvcGrid')) {
        setTimeout(initScrollReveal, 500); // Small delay to let loops finish
    }
});
